<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OptimaTrack V2 - Management Console</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #050505; color: white; font-family: 'Inter', ui-monospace, monospace; }
        .glass { background: rgba(15, 15, 15, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .editable:hover { background: rgba(139, 92, 246, 0.1); cursor: text; border-radius: 4px; }
        input[type="range"] { accent-color: #8B5CF6; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const DEFAULT_SCHEDULE = [
            { id: 1, t: "07:00", task: "Biological Startup", sop: "Sunlight + Hydration", cat: "Health", done: false },
            { id: 2, t: "08:30", task: "Deep Work Block A", sop: "Airplane mode execution", cat: "Work", done: false },
            { id: 3, t: "12:30", task: "Metabolic Reset", sop: "Protein meal + 15m walk", cat: "Rest", done: false }
        ];

        function App() {
            const [schedule, setSchedule] = useState(DEFAULT_SCHEDULE);
            const [score, setScore] = useState(85.0);
            const [satisfaction, setSatisfaction] = useState(80);
            const [isCompleting, setIsCompleting] = useState(false);
            const [activeId, setActiveId] = useState(2);

            // Update Task Data Live
            const updateTask = (id, field, value) => {
                setSchedule(prev => prev.map(item => item.id === id ? {...item, [field]: value} : item));
            };

            const completeTask = () => {
                const taskWeight = satisfaction / 100;
                setScore(prev => Math.min(100, prev + (5 * taskWeight)));
                setSchedule(prev => prev.map(item => item.id === activeId ? {...item, done: true} : item));
                setIsCompleting(false);
                // Move to next logical task
                if (activeId < schedule.length) setActiveId(activeId + 1);
            };

            const activeTask = schedule.find(s => s.id === activeId) || schedule[0];

            return (
                <div className="min-h-screen p-6 md:p-12 transition-all">
                    <div className="max-w-5xl mx-auto">
                        
                        {/* GLOBAL SCORE HEADER */}
                        <div className="flex flex-col md:flex-row justify-between items-end mb-12 gap-6">
                            <div>
                                <h1 className="text-xs tracking-[0.4em] text-violet-500 font-black uppercase mb-2">Optimization Console V2</h1>
                                <div className="text-8xl font-black italic">
                                    {score.toFixed(1)}<span className="text-3xl text-gray-700">%</span>
                                </div>
                            </div>
                            <div className="w-full md:w-64 glass p-4 rounded-2xl">
                                <p className="text-[10px] text-gray-500 mb-2 uppercase tracking-widest">System Stability</p>
                                <div className="h-2 bg-gray-900 rounded-full overflow-hidden">
                                    <div className="h-full bg-violet-600 transition-all duration-1000" style={{width: `${score}%`}}></div>
                                </div>
                            </div>
                        </div>

                        <div className="grid lg:grid-cols-3 gap-8">
                            
                            {/* LEFT: EDITABLE TASK LIST */}
                            <div className="lg:col-span-1 space-y-4">
                                <h3 className="text-[10px] font-bold text-gray-500 uppercase tracking-widest px-2">Daily Timeline (Edit Inline)</h3>
                                {schedule.map(item => (
                                    <div key={item.id} 
                                         onClick={() => setActiveId(item.id)}
                                         className={`glass p-4 rounded-2xl cursor-pointer transition-all ${item.id === activeId ? 'border-violet-500 bg-violet-500/5' : 'opacity-50'}`}>
                                        <div className="flex justify-between items-center">
                                            <input 
                                                className="bg-transparent text-xs font-bold text-gray-400 outline-none w-12"
                                                value={item.t}
                                                onChange={(e) => updateTask(item.id, 't', e.target.value)}
                                            />
                                            {item.done && <span className="text-[10px] text-emerald-500 font-bold">● DONE</span>}
                                        </div>
                                        <input 
                                            className="bg-transparent block w-full text-sm font-bold mt-1 outline-none editable"
                                            value={item.task}
                                            onChange={(e) => updateTask(item.id, 'task', e.target.value)}
                                        />
                                    </div>
                                ))}
                            </div>

                            {/* RIGHT: TASK EXECUTION & SATISFACTION */}
                            <div className="lg:col-span-2 space-y-6">
                                <div className="glass p-8 rounded-[2.5rem] relative overflow-hidden">
                                    <div className="absolute top-0 right-0 p-6 opacity-10 font-black text-6xl">0{activeTask.id}</div>
                                    
                                    <h2 className="text-sm font-black text-violet-400 uppercase tracking-widest mb-2">Active Directive</h2>
                                    <input 
                                        className="bg-transparent block w-full text-4xl font-black mb-4 outline-none editable uppercase"
                                        value={activeTask.task}
                                        onChange={(e) => updateTask(activeTask.id, 'task', e.target.value)}
                                    />
                                    
                                    <label className="text-[10px] text-gray-500 uppercase font-bold">SOP / Protocol</label>
                                    <textarea 
                                        className="bg-transparent block w-full text-gray-400 mt-2 outline-none editable resize-none overflow-hidden"
                                        value={activeTask.sop}
                                        rows="2"
                                        onChange={(e) => updateTask(activeTask.id, 'sop', e.target.value)}
                                    />

                                    <div className="mt-12 pt-8 border-t border-white/5">
                                        {!isCompleting ? (
                                            <button 
                                                onClick={() => setIsCompleting(true)}
                                                className="w-full bg-white text-black py-4 rounded-2xl font-black hover:bg-violet-500 hover:text-white transition-all"
                                            >
                                                COMPLETE MISSION
                                            </button>
                                        ) : (
                                            <div className="space-y-6 animate-in fade-in duration-500">
                                                <div className="flex justify-between items-center">
                                                    <label className="text-xs font-bold uppercase tracking-widest">Satisfaction Ratio: {satisfaction}%</label>
                                                    <span className="text-xl font-bold text-violet-500">{satisfaction < 50 ? '⚙️' : '⚡'}</span>
                                                </div>
                                                <input 
                                                    type="range" min="1" max="100" 
                                                    value={satisfaction} 
                                                    onChange={(e) => setSatisfaction(e.target.value)}
                                                    className="w-full h-1 bg-gray-800 rounded-lg appearance-none cursor-pointer"
                                                />
                                                <button 
                                                    onClick={completeTask}
                                                    className="w-full bg-emerald-500 text-white py-4 rounded-2xl font-black hover:bg-emerald-400 transition-all"
                                                >
                                                    SUBMIT VERIFIED LOG
                                                </button>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</body>
</html>
